---
layout: post
title:  3D 그래픽 수학
category: 게임을 움직이는 기술과 발상
description: 게임 프로그래밍, 특히 3D 그래픽에는 약간의 수학이 사용된다. 3D 그래픽에 필요한 수학 기반을 닦아본다.
---



게임 속의 다양한 곳에서 수학 지식이 요구.

3D 그래픽에 관련된 처리는 벡터, 메트릭스(matrix, 행렬).



# 3차원 공간의 좌표계

3차원 공간에서 한개의 점을 나타내려면 3개의 수가 필요.

각각을 알파벳 X, Y, Z로 나타낼 때 이 X, Y, Z를 하나로 통합한 것을 **좌표**. 일반적으로 괄호 안에 표시해 (X, Y, X)로 표기.



좌표를 나타내는 각각의 성분이 어떤 수를 가질지는 좌표축에 따라 결정됨.

3차원 공간에 교차하는 3개의 직선을 배치하고 각각의 교차점을 0을 설정하면 3개의 좌표치를 표시할 수 있음. 3개의 직선을 **좌표축**이라고 하며, 각각을 X축, Y축, Z축으로 부름. 좌표축 끝의 화살표가 향하는 방향이 정(플러스)이 됨.

일반적으로 X축, Z축에 따라 구성되는 면은 수평면, Y축은 상하를 나타냄.

 ![image](https://user-images.githubusercontent.com/26755686/58294975-c4045580-7e07-11e9-9afe-e3f6e0466e45.png)



위의 그림에서 나타낸 것을 **오른쪽 좌표계**라고 하며, 반대는 **왼손 좌표계**

![image](https://user-images.githubusercontent.com/26755686/58295084-560c5e00-7e08-11e9-9a1b-dda222ddcd7d.png)

게임에서는 3차원 공간상의 좌표 집합으로 이루어진 플레이어나 건물 등의 형상을 구축해 화면에 표시함.

![image](https://user-images.githubusercontent.com/26755686/58295263-39bcf100-7e09-11e9-9508-4383a9d7c74c.png)

좌표 집합에 의한 손의 형상을 나타냄.

플레이어를 구성하는 좌표를 **정점**이라고 부른다. 단, 정점에는 'X, Y, Z'의 좌표치뿐만 아니라 캐릭터를 개성적으로 보이기 위해 필요한 데이터도 포함되어 있다.



# 좌표와 벡터

## 좌표

좌표는 X, Y, Z 3개의 요소로 구성되어 있고, 각각의 요소를 정수로 나타낸 것으로 세세한 제어는 할 수 없다. 그래서 부동 소수점을 사용한다. 부동소수점 수는 4바이트기 때문에 'X, Y, Z' 3개는 12바이트가 된다.

그러나 프로그램의 사정상 'X, Y, Z'에 'W'라는 요소를 추가해 4요소로 설정한다. 여기서 W라는 것은 부동소수점 수로, 항상 1.0으로 설정.

![image](https://user-images.githubusercontent.com/26755686/58311305-99d08900-7e43-11e9-801a-b752c329967b.png)



## 벡터

위치를 표현하는 좌표로 **벡터(vector)**라는 개념이 존재. 벡터란 방향을 가리키는 것을 의미하며, 일반적으로 그림에서는 좌표계를 화살표로 표현.

벡터는 방향을 가리키는 것을 의미하며, 일반적으로 그림에서는 좌표계를 화살표로 표현함.

벡터는 방향을 가리키기 때문에, 게임에서는 플레이어가 이동할 방향이나 빛이 향하는 방향 등을 지식하기 위해 사용된다.  벡터는 기본적으로 'X, Y, Z' 3요소로 구성되어 있으며, 프로그래밍에서의 좌표와 마찬가지로 W요소를 추가해 4요소가 됩니다. 단, 벡터의 경우 W요소를 0.0으로 설정.

![image](https://user-images.githubusercontent.com/26755686/58312312-0187d380-7e46-11e9-9982-5dfea0179e61.png)

좌표에 벡터를 추가하면 이동 후 좌표를 얻을 수 있음.

![image](https://user-images.githubusercontent.com/26755686/58312633-ac988d00-7e46-11e9-9d61-3f1f87b57a03.png)



좌표에서 좌표를 연결하면 벡터가 된다. 이렇게 함으로써 임의의 점에서 임의의 점까지의 방향을 알 수 있다.

![image](https://user-images.githubusercontent.com/26755686/58312814-0d27ca00-7e47-11e9-9c8c-0be106f43c7a.png)

벡터는 방향을 나타내는 개념이라서 상향에 따라서는 벡터의 방향만 중요하고 그 길이에는 의미를 두지 않는 경우도 있다. 이러한 경우 벡터의 길이를 1로 고정해 프로그래밍하면 좋다. 벡터의 길이를 1로 설정하는 것을 **정규화**라고 한다.



![image](https://user-images.githubusercontent.com/26755686/58313277-254c1900-7e48-11e9-8fe9-ffc037c8757f.png)



# 메트릭스

